const fs = require('fs-extra');
const axios = require('axios');

module.exports = {
  config: {
    name: 'fyt',
    aliases: ['chatfight', 'textbattle'],
    version: '2.0.0',
    author: 'ğ´ğ‘ ğ‘–ğ‘“ ğ‘€ğ‘â„ğ‘šğ‘¢ğ‘‘',
    countDown: 15,
    role: 0,
    category: 'fun',
    shortDescription: {
      en: 'ğŸ’¬ ğ¶â„ğ‘ğ‘¡ğ‘ğ‘œğ‘¥ ğ‘Šğ‘ğ‘Ÿ - ğ¹ğ‘¢ğ‘› ğ‘–ğ‘›ğ‘¡ğ‘’ğ‘Ÿğ‘ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’ ğ‘“ğ‘–ğ‘”â„ğ‘¡ ğ‘ ğ‘–ğ‘šğ‘¢ğ‘™ğ‘ğ‘¡ğ‘–ğ‘œğ‘›'
    },
    longDescription: {
      en: 'ğ¹ğ‘¢ğ‘› ğ‘–ğ‘›ğ‘¡ğ‘’ğ‘Ÿğ‘ğ‘ğ‘¡ğ‘–ğ‘£ğ‘’ ğ‘“ğ‘–ğ‘”â„ğ‘¡ ğ‘ ğ‘–ğ‘šğ‘¢ğ‘™ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘¤ğ‘–ğ‘¡â„ ğ‘’ğ‘šğ‘œğ‘—ğ‘–ğ‘  ğ‘ğ‘›ğ‘‘ â„ğ‘¢ğ‘šğ‘œğ‘Ÿ ğŸ¥Š'
    },
    guide: {
      en: '{p}fyt [@ğ‘šğ‘’ğ‘›ğ‘¡ğ‘–ğ‘œğ‘›]'
    },
    dependencies: {
      'fs-extra': '',
      'axios': ''
    }
  },

  onStart: async function({ api, event, args, message, usersData }) {
    try {
      const targetID = Object.keys(event.mentions)[0];
      if (!targetID) {
        return message.reply('âš ï¸ | ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘šğ‘’ğ‘›ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ ğ‘œğ‘šğ‘’ğ‘œğ‘›ğ‘’ ğ‘¡ğ‘œ ğ‘“ğ‘–ğ‘”â„ğ‘¡ ğ‘¤ğ‘–ğ‘¡â„! ğ¸ğ‘¥ğ‘ğ‘šğ‘ğ‘™ğ‘’: !ğ‘“ğ‘¦ğ‘¡ @ğ‘¢ğ‘ ğ‘’ğ‘Ÿğ‘›ğ‘ğ‘šğ‘’');
      }

      const fighter1 = await usersData.getName(event.senderID);
      const fighter2 = await usersData.getName(targetID);
      
      // Send initial challenge message
      await message.reply(`ğŸ¥Š | ${fighter1} â„ğ‘ğ‘  ğ‘â„ğ‘ğ‘™ğ‘™ğ‘’ğ‘›ğ‘”ğ‘’ğ‘‘ ${fighter2} ğ‘¡ğ‘œ ğ‘ ğ‘â„ğ‘ğ‘¡ğ‘ğ‘œğ‘¥ ğ‘¤ğ‘ğ‘Ÿ! ğŸ¥Š\n\nğºğ‘’ğ‘¡ ğ‘Ÿğ‘’ğ‘ğ‘‘ğ‘¦ ğ‘“ğ‘œğ‘Ÿ ğ‘ğ‘› ğ‘’ğ‘ğ‘–ğ‘ ğ‘ğ‘ğ‘¡ğ‘¡ğ‘™ğ‘’! ğŸ’¥`);
      
      // Array of fight messages with emojis
      const fightMessages = [
        { text: `ğŸ’¥ ${fighter1}: "73ğ‘…! 83ğ»4ğ‘ ğ¾4 9ğ»ğ‘ˆğ·4 ğ‘€ğ´ğ‘…ğ‘‚9! ğº4ğ‘ğ·ğ‘ˆ ğ¾ğ´ ğµğ´ğ¶ğ»ğ´ ğŸ˜ğŸ˜ğŸ˜â¤ï¸ğŸ˜‚"`, delay: 2000 },
        { text: `ğŸ”¥ ${fighter2}: "777333ğ‘…ğ‘…ğ‘…111 ğµğ´ğ´ğ»ğ‘ ğ¾ğ¾ğ¾111 ğ¿ğ¿ğ¿ğ¿ğ´ğ´ğ´ğ¿ğ¿ ğºğºğºğºğ´ğ´ğ´ğ‘ğ‘ğ‘ğ·ğ·ğ· ğ‘‰ğ‘‰ğ‘‰ğ¼ğ¶ğ¶ğ»ğ»ğ» ğ‘€3ğ‘…ğ‘…ğ‘…444 ğ¿ğ¿ğ¿ğ¿ğ‘‚ğ‘‚ğ‘‚ğ‘…ğ‘…ğ‘…ğ´ğ´ğ´ğ´ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚"`, delay: 4000 },
        { text: `ğŸ¤œ ${fighter1}: "ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ´ğ´ğ´ğ´ğ‘ğ‘ğ‘ğ‘ğ·ğ·ğ·ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ ğµğµğµğµğµğ´ğ´ğ´ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ´ğ´ğ´ğ´â¤ï¸â¤ï¸â¤ï¸ ğŸ˜‚ğŸ˜‚ğŸ˜‚"`, delay: 6000 },
        { text: `ğŸ¤¯ ${fighter2}: "ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ´ğ´ğ´ğ´ğ´ğ´ğ·ğ·ğ·ğ·ğ·ğ¸ğ¸ğ¸ğ¸ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘… ğ¶ğ¶ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ»ğ»ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ·ğ·ğ·ğ·ğ·ğ·ğ· ğ¾ğ¼ ğ‘‚ğ¿ğ´ğ·ğŸ˜ğŸ˜â¤ï¸â¤ï¸ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚"`, delay: 8000 },
        { text: `ğŸ’£ ${fighter1}: "ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ¸ğ¸ğ¸ğ¸ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ ğµğµğµğµğµğµğµğµğµğ´ğ´ğ´ğ´ğ´ğ´ğ»ğ»ğ»ğ»ğ»ğ»ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ´ğ´ğ´ğ´ğ´ ğ‘ƒğ‘ƒğ‘ƒğ‘ƒğ‘ƒğ‘ƒğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ·ğ·ğ·ğ·ğ´ğ´ğ´ğ´ ğ‘€ğ‘ğ‘€ğ‘€ğ´ğ´ğ´ğ´ğ‘…ğ‘…ğ‘…ğ‘…ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ¤”ğŸ¤”ğŸ˜ğŸ˜ğŸ˜ğŸ˜â¤ï¸ğŸ˜‚ğŸ˜‚ğŸ˜‚â¤ï¸"`, delay: 10000 },
        { text: `ğŸ¯ ${fighter2}: "ğµğµğµğµğµğµğµğµğµğµğµğ´ğ´ğ´ğ´ğ´ğ»ğ»ğ»ğ»ğ»ğ»ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğ¶ğ¶ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ»ğ»ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ·ğ·ğ·ğ·ğ·ğ·ğ· ğºğºğºğºğºğºğºğºğºğºğºğºğºğºğºğºğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ·ğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆâ¤ï¸â¤ï¸â¤ï¸â¤ï¸ğŸ˜‚ğŸ˜‚ğŸ˜‚ â¤ï¸â¤ï¸â¤ï¸"`, delay: 12000 },
        { text: `âš¡ ${fighter1}: "777333ğ‘…ğ‘…ğ‘…111 ğµğ´ğ´ğ»ğ‘ ğ¾ğ¾ğ¾111 ğ¿ğ¿ğ¿ğ¿ğ´ğ´ğ´ğ¿ğ¿ ğºğºğºğºğ´ğ´ğ´ğ‘ğ‘ğ‘ğ·ğ·ğ· ğ‘‰ğ‘‰ğ‘‰ğ¼ğ¶ğ¶ğ»ğ»ğ» ğ‘€3ğ‘…ğ‘…ğ‘…444 ğ¿ğ¿ğ¿ğ¿ğ‘‚ğ‘‚ğ‘‚ğ‘…ğ‘…ğ‘…ğ´ğ´ğ´ğ´ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚"`, delay: 14000 },
        { text: `ğŸŒªï¸ ${fighter2}: "ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ¸ğ¸ğ¸ğ¸ğ¸ğ‘‹ğ‘‹ğ‘‹ğ‘‹ğ‘‹ğ¼ğ¼ğ¼ğ¼ğ¼ ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ´ğ´ğ´ğ´ğ´ğ´ğ´ ğµğµğµğµğµğ´ğ´ğ´ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ´ğ´ğ´ğ´ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ¸ğ¸ğ¸ğ¸ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ ğµğµğµğµğµğµğµğµğµğ´ğ´ğ´ğ´ğ´ğ´ğ»ğ»ğ»ğ»ğ»ğ»ğ´ğ´ğ´ğ´ğ´ğ´ğ´ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ğ‘ ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ´ğ´ğ´ğ´ ğµğµğµğ‘‚ğ‘‚ğ‘‚ğµğµğµğ‘†ğ‘†ğ‘† ğ¶ğ¶ğ¶ğ¶ğ¶ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ»ğ»ğ»ğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘†ğ‘†ğ‘†ğ‘†ğ‘†ğ‘†ğ‘†ğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆğ‘ˆ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚â¤ï¸â¤ï¸â¤ï¸ğŸ˜‚ğŸ˜‚ğŸ˜‚"`, delay: 16000 },
        { text: `ğŸ’« ${fighter1}: "ğºğºğºğºğºğºğºğºğºğºğºğºğºğºğºğ»ğ»ğ»ğ»ğ»ğ´ğ´ğ´ğ´ğ´ğ‘†ğ‘†ğ‘†ğ‘†ğ‘†ğ»ğ»ğ»ğ»ğ»ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ‘‡ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ğ¼ ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ¾ğ´ğ´ğ´ğ´ğ´ğ´ğ´ ğµğµğµğµğµğ´ğ´ğ´ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ´ğ´ğ´ğ´ ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜â¤ï¸"`, delay: 18000 },
        { text: `ğŸŒŸ ${fighter2}: "ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ‘€ğ´ğ´ğ´ğ´ğ´ğ´ğ·ğ·ğ·ğ·ğ·ğ¸ğ¸ğ¸ğ¸ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘…ğ‘… ğ¶ğ¶ğ¶ğ¶ğ¶ğ»ğ»ğ»ğ»ğ»ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ‘‚ğ·ğ·ğ·ğ·ğ·ğ·ğ· â˜¹ï¸â˜¹ï¸â˜¹ï¸â˜¹ï¸â˜¹ï¸ğŸ˜ğŸ˜ğŸ˜â˜¹ï¸â¤ï¸â¤ï¸"`, delay: 20000 }
      ];

      // Send fight messages with delays
      for (const msg of fightMessages) {
        await new Promise(resolve => setTimeout(resolve, msg.delay));
        await message.reply(msg.text);
      }

      // Send final result after all messages
      setTimeout(async () => {
        const results = [
          `ğŸ‰ | ğ‘‡â„ğ‘’ ğ‘’ğ‘ğ‘–ğ‘ ğ‘â„ğ‘ğ‘¡ğ‘ğ‘œğ‘¥ ğ‘¤ğ‘ğ‘Ÿ ğ‘ğ‘’ğ‘¡ğ‘¤ğ‘’ğ‘’ğ‘› ${fighter1} ğ‘ğ‘›ğ‘‘ ${fighter2} â„ğ‘ğ‘  ğ‘ğ‘œğ‘›ğ‘ğ‘™ğ‘¢ğ‘‘ğ‘’ğ‘‘! ğŸ‰`,
          `ğŸ… | ğµğ‘œğ‘¡â„ ğ‘“ğ‘–ğ‘”â„ğ‘¡ğ‘’ğ‘Ÿğ‘  ğ‘ â„ğ‘œğ‘¤ğ‘’ğ‘‘ ğ‘–ğ‘›ğ‘ğ‘Ÿğ‘’ğ‘‘ğ‘–ğ‘ğ‘™ğ‘’ ğ‘ ğ‘˜ğ‘–ğ‘™ğ‘™ğ‘  ğ‘ğ‘›ğ‘‘ â„ğ‘¢ğ‘šğ‘œğ‘Ÿ!`,
          `ğŸ¤— | ğ‘‡â„ğ‘–ğ‘  ğ‘ğ‘ğ‘¡ğ‘¡ğ‘™ğ‘’ ğ‘¤ğ‘–ğ‘™ğ‘™ ğ‘ğ‘’ ğ‘Ÿğ‘’ğ‘šğ‘’ğ‘šğ‘ğ‘’ğ‘Ÿğ‘’ğ‘‘ ğ‘–ğ‘› ğ‘¡â„ğ‘’ â„ğ‘ğ‘™ğ‘™ğ‘  ğ‘œğ‘“ ğ‘â„ğ‘ğ‘¡ğ‘ğ‘œğ‘¥ â„ğ‘–ğ‘ ğ‘¡ğ‘œğ‘Ÿğ‘¦!`,
          `ğŸ’– | ğ‘…ğ‘’ğ‘šğ‘’ğ‘šğ‘ğ‘’ğ‘Ÿ, ğ‘–ğ‘¡'ğ‘  ğ‘ğ‘™ğ‘™ ğ‘–ğ‘› ğ‘”ğ‘œğ‘œğ‘‘ ğ‘“ğ‘¢ğ‘›! ğ‘ğ‘œ ğ‘Ÿğ‘’ğ‘ğ‘™ ğ‘“ğ‘’ğ‘’ğ‘™ğ‘–ğ‘›ğ‘”ğ‘  ğ‘¤ğ‘’ğ‘Ÿğ‘’ â„ğ‘ğ‘Ÿğ‘šğ‘’ğ‘‘! ğŸ˜Š`
        ];
        
        await message.reply(results.join('\n\n'));
      }, 25000);

    } catch (error) {
      console.error(error);
      message.reply('âŒ | ğ´ğ‘› ğ‘’ğ‘Ÿğ‘Ÿğ‘œğ‘Ÿ ğ‘œğ‘ğ‘ğ‘¢ğ‘Ÿğ‘Ÿğ‘’ğ‘‘ ğ‘¤â„ğ‘–ğ‘™ğ‘’ ğ‘ğ‘Ÿğ‘œğ‘ğ‘’ğ‘ ğ‘ ğ‘–ğ‘›ğ‘” ğ‘¡â„ğ‘’ ğ‘“ğ‘–ğ‘”â„ğ‘¡ ğ‘ğ‘œğ‘šğ‘šğ‘ğ‘›ğ‘‘. ğ‘ƒğ‘™ğ‘’ğ‘ğ‘ ğ‘’ ğ‘¡ğ‘Ÿğ‘¦ ğ‘ğ‘”ğ‘ğ‘–ğ‘› ğ‘™ğ‘ğ‘¡ğ‘’ğ‘Ÿ.');
    }
  }
};
